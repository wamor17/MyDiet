
Platillos = {
    Desayuno: {
        Licuados: {
            LicuadoPapayaFresa: [{ Nombre: 'Licuado de Papaya y Fresas',
                                   Ingredientes: [  '1 taza de papaya',
                                                    'taza de fresas',
                                                    '1 taza de agua',
                                                    '1 cucharada de avena',
                                                    '1 cucharada de linaza']
                                }],
            LicuadoFresas:      [{ Nombre: 'Licuado de Fresa',
                                   Ingredientes: [  '1 taza de fresas',
                                                    '1 taza de agua',
                                                    '1 cucharada de avena',
                                                    '1 cucharada de linaza',
                                                    '5 almendras']
                                }],
            LicuadoVerde:       [{ Nombre: 'Licuado Verde',
                                   Ingredientes: [  '1 pezado de Nopal',
                                                    '1 pedazo de Perejil',
                                                    '1 pedazo de Apio',
                                                    '1 Manzana',
                                                    '1 pedazo de Papaya',
                                                    '1 cucharada de linaza',
                                                    '1 cucharada de avena',
                                                    '1 taza de agua',
                                                    ]
                                }]
        },
        PapayaYQuesoCottage: [{
            Nombre: 'Papaya con queso cottage',
            Ingredientes: [
                '1 taza de papaya',
                '3 cucharadas de queso cottage',
                '5 almendras'
            ]
        }],
        Tes: {
            TeManzanilla: [{
                Nombre: 'Té de Manzanilla',
                Ingredientes: [
                    '1 taza de té de manzanilla',
                    '1 manzana',
                    '5 almendras'
                ]
            }],
            TeCanela: [{
                Nombre: 'Té de Canela',
                Ingredientes: [
                    '1 taza de canela',
                    '1 taza de papaya',
                    '5 almendras'
                ]
            }]
        },
        Quinoa: [{
            Nombre: 'Quinoa',
            Ingredientes: [
                '2 cucharadas de Quinoa',
                '3 cucharadas de leche',
                '1 manzana'
            ]
        }],
        KiwiConYogurt: [{
            Nombre: 'Kiwi con Yogurt',
            Ingredientes: [
                '1 Kiwi',
                '1/2 taza de Yorgurt light',
                '5 almendras'
            ]
        }]        
    },
    Almuerzo: {
        HotCake: [{ Nombre: 'Hot Cake',
                    Ingredientes: [ '1/3 de taza de avena',
                                    'Canela al gusto',
                                    '1 Calabacita',
                                    '1/2 de taza light',
                                    '5 almendras'
                    ]
        }],
        Sandwich: [{ Nombre: 'Sandwich',
                     Ingredientes: [ '2 rebandas de pan integral',
                                     'Salsa',
                                     '1/3 de aguacate',
                                     'Jitomate',
                                     'Cebolla',
                                     '2 rebandas de jamón de pavo'

                     ]
        }],
        Salchichas: [{
            Nombre: 'Salchichas',
            Ingredientes: [
                '1/2 taza de frijoles',
                '2 salchichas',
                '1 cucharada de guacamole',
                '1 taza de ensalada de verduras crudas',
                '2 tostadas horneadas'
            ]
        }],
        FajitasDePollo: [{
            Nombre: 'Fajitas de Pollo',
            Ingredientes: [
                '90 g de pechuga de pollo ',
                'Verdura mixta',
                '1/2 taza de frijoles de la olla',
                'Salsa',
                '1 pan integral'
            ]
        }],
        Claras: [{
            Nombre: 'Claras de huevo',
            Ingredientes: [
                '2 claras',
                '2 rebandas de queso panela',
                'Verdura al gusto',
                '1/3 de aguacate',
                'Champiñones',
                '1 tortilla chica'
            ]
        }],
        Enfrijoladas: [{
            Nombre: 'Enfrijoladas',
            Ingredientes: [
                '1/2 taza de nopales',
                '1 pieza de pollo',
                'Verdura al gusto',
                'Salsa',
                '1/3 de aguacate',
                '2 tortillas chicas'
            ]
        }],
        Champiñones: [{
            Nombre: 'Champiñones',
            Ingredientes: [
                '1 taza de champiñones',
                'Jitomate',
                'Cebolla',
                'Salsa',
                '1/3 de aguacate',
                '1 tortilla de maíz'
            ]
        }]
    },
    Colacion: {
        PostAlmuerzo: [{
            Gazpacho: [{
                Nombre: 'Gaspacho',
                Ingredientes: [
                    '5 Alemndraz',
                    '1 taza de gaspacho sin queso',
                    '1 gelatina light'
                ]
            }],
            NuecesYPera: [{
                Nombre: 'Pera con Nueces',
                Ingredientes: [
                    '5 nueces',
                    '1 pera',
                    'Gelatina liquida'
                ]
            }],
            PistachesYPapaya: [{
                Nombre: 'Papaya con pistaches',
                Ingredientes: [
                    '5 pistaches',
                    '1 taza de papaya',
                    '1 gelatina light'
                ]
            }],
            MelonYAlmendras: [{
                Nombre: 'Melón con almendras',
                Ingredientes: [
                    '5 almendras',
                    '1 taza de melón',
                    '1 gelatina light'
                ]
            }],
            NuecesYManzana: [{
                Nombre: 'Manzana con nueces',
                Ingredientes: [
                    '5 nueces',
                    '1 manzana',
                    '1 gelatina light'
                ]
            }]
        }],
        PostComida: [{
            Garbanzos: [{
                Nombre: 'Garbanzos',
                Ingredientes: [
                    '1/2 taza de garbanzos',
                    '5 almendras',
                    '1 gelatina light'
                ]
            }],
            Jicama: [{
                Nombre: 'Jamaica',
                Ingredientes: [
                    '1 taza de jicama',
                    '5 almendras',
                    '1 gelatina light'
                ]
            }],
            CacahuatesTostados: [{
                Nombre: 'Cacahuates tostados',
                Ingredientes: [
                    '1/2 taza de cacahuates tostados',
                    '5 almendras',
                    '1 gelatina light'
                ]
            }],
            ChayoteCocido: [{
                Nombre: 'Chayote cocido',
                Ingredientes: [
                    '1 taza de chayote cocido',
                    '5 almendras',
                    '1 gelatina light'
                ]
            }],
            Sandia: [{
                Nombre: 'Sandia',
                Ingredientes: [
                    '1 taza de sandía',
                    '5 almendras',
                    '1 gelatina light'
                ]
            }],
            Zanahoria: [{
                Nombre: 'Zanahoria',
                Ingredientes: [
                    '1 taza de zanahorias',
                    '5 almendras',
                    '1 gelatina light'
                ]
            }],
            Piña: [{
                Nombre: 'Piña',
                Ingredientes: [
                    '1 taza de piña',
                    '5 almendras',
                    '1 gelatina light'
                ]
            }]
        }]
    },
    Comida: {
        BisteckALaMexicana: [{
            Nombre: 'Bisteck a la mexicana',
            Ingredientes: [
                '1/2 taza de frijoles molidos',
                '200 g de bisteck de res',
                'Jitomate',
                'Cebolla',
                '1 cucharada de guacamole',
                '1 taza de ensalada de verduras crudas',
                '1/2 taza de arroz'
            ]
        }],
        Tinga: [{
            Nombre: 'Tinga',
            Ingredientes: [
                '1/2 taza de lentajas',
                '90 g de pollo',
                '1 cucharada de guacamole',
                '1 taza de ensalada de verduras crudas',
                '1/2 taza de arrioz'
            ]
        }],
        Tsurimi: [{
            Nombre: 'Tsurimi',
            Ingredientes: [
                '1/2 taza de garbanzos',
                '2 barras de tsurimi',
                '1 cucharada de guacamole',
                '1 taza de ensalada de verduras crudas',
                '1/2 taza de arroz'
            ]
        }],
        PizzaDeAvena: [{
            Nombre: 'Pizza de avena',
            Ingredientes: [
                '1/2 de taza de avena molida',
                '1 salchicha',
                '1 rebanada de queso panela',
                'Verduras al gusto',
                'Salsa de tomate',
                'Rajas'
            ]
        }],
        Lomo: [{
            Nombre: 'Lomo',
            Ingredientes: [
                '1/2 taza de frijoles molidos',
                '100 g de lomo',
                '1 cucharada de huacamole',
                '1 taza de ensalada de verduras crudas',
                '1 tortilla de maíz'
            ]
        }],
        EnsaladaDeCamarones: [{
            Nombre: 'Ensalada de camarones',
            Ingredientes: [
                '6 camarones',
                'Jicama',
                'Pepino',
                '1 taza de lechuga',
                '1/3 de aguacate',
                '2 tostadas horneadas'
            ]
        }],
        TostadasDeJamon: [{
            Nombre: 'Tostadas de jamón',
            Ingredientes: [
                '2 rebanadas de jamón de pavo',
                'Jitomate rebanado',
                'Zanahoria rallada',
                ''
            ]
        }]
    },
    Cena: {
        LicuadoManzanaLeche: [{
            Nombre: 'Licuado de Manzana con leche',
            Ingredientes: [
                '1 taza de leche light',
                '1 manzana',
                '5 almendras',
                '1 cucharada de avena'
            ]
        }],
        NopalesConPollo: [{
            Nombre: 'Nopales con pollo',
            Ingredientes: [
                '90 g de pechuga de pollo',
                'Verdura al gusto',
                'Salsa',
                '1/3 de aguacate'
            ]
        }],
        EnsaladaQuesoPanela: [{
            Nombre: 'Ensalada de queso panela',
            Ingredientes: [
                '2 rebanadas de queso panela',
                'Verdura al gusto',
                'Salsa',
                '1/3 de aguacate'
            ]
        }],
        PapayaYQuesoCottage: [{
            Nombre: 'Papaya con queso cottage',
            Ingredientes: [
                '1 taza de papaya',
                '3 cucharadas de queso cottage',
                '5 almendras'
            ]
        }],
        Quesadilla: [{
            Nombre: 'Quesadilla',
            Ingredientes: [
                '1 tortilla de maíz',
                '2 rebanadas de queso panela',
                '1 taza de verduras mixtas',
                'Salsa'
            ]
        }],
        PechugaAsada: [{
            Nombre: 'Pechuga asada',
            Ingredientes: [
                '100 g de pechuga',
                'Jitomate',
                'Cebolla',
                '2 tostadas horneadas',
                '1/3 de aguacate'
            ]
        }],
        BisteckDeRes: [{
            Nombre: 'Bisteck de res',
            Ingredientes: [
                '90 g de bisteck de res',
                'Salsa',
                '1/3 de aguacate',
                'Jitomate',
                'Cebolla'
            ]
        }]

    }
};

DietWeek = {
    Desayuno: {
        Hora:       '07:30 am',
        Lunes:      Platillos.Desayuno.Licuados.LicuadoPapayaFresa,
        Martes:     Platillos.Desayuno.PapayaYQuesoCottage,
        Miercoles:  Platillos.Desayuno.Tes.TeManzanilla,
        Jueves:     Platillos.Desayuno.Tes.TeCanela,
        Viernes:    Platillos.Desayuno.Quinoa,
        Sabado:     Platillos.Desayuno.KiwiConYogurt,
        Domingo:    Platillos.Desayuno.Licuados.LicuadoFresas
    },
    Almuerzo:{
        Hora:       '10:00 am',
        Lunes:      Platillos.Almuerzo.HotCake,
        Martes:     Platillos.Almuerzo.Sandwich,
        Miercoles:  Platillos.Almuerzo.Salchichas,
        Jueves:     Platillos.Almuerzo.FajitasDePollo,
        Viernes:    Platillos.Almuerzo.Claras,
        Sabado:     Platillos.Almuerzo.Enfrijoladas,
        Domingo:    Platillos.Almuerzo.Champiñones
    },
    ColacionPostAlmuerzo:{
        Hora:       '12:00-01:00 pm',
        Lunes:      Platillos.Colacion.PostAlmuerzo[0].Gazpacho,
        Martes:     Platillos.Colacion.PostAlmuerzo[0].NuecesYPera,
        Miercoles:  Platillos.Colacion.PostAlmuerzo[0].PistachesYPapaya,
        Jueves:     Platillos.Colacion.PostAlmuerzo[0].MelonYAlmendras,
        Viernes:    Platillos.Colacion.PostAlmuerzo[0].Gazpacho,
        Sabado:     Platillos.Colacion.PostAlmuerzo[0].NuecesYPera,
        Domingo:    Platillos.Colacion.PostAlmuerzo[0].NuecesYManzana,
    },
    Comida:{
        Hora:       '03:00 pm',
        Lunes:      Platillos.Comida.BisteckALaMexicana,
        Martes:     Platillos.Comida.BisteckALaMexicana,
        Miercoles:  Platillos.Comida.BisteckALaMexicana,
        Jueves:     Platillos.Comida.BisteckALaMexicana,
        Viernes:    Platillos.Comida.BisteckALaMexicana,
        Sabado:     Platillos.Comida.BisteckALaMexicana,
        Domingo:    Platillos.Comida.BisteckALaMexicana,
    },
    ColacionPostComida:{
        Hora:       '06:00 pm',
        Lunes:      Platillos.Colacion.PostComida[0].Garbanzos,
        Martes:     Platillos.Colacion.PostComida[0].Jicama,
        Miercoles:  Platillos.Colacion.PostComida[0].CacahuatesTostados,
        Jueves:     Platillos.Colacion.PostComida[0].ChayoteCocido,
        Viernes:    Platillos.Colacion.PostComida[0].Sandia,
        Sabado:     Platillos.Colacion.PostComida[0].Zanahoria,
        Domingo:    Platillos.Colacion.PostComida[0].Piña,
    },
    Cena:{
        Hora:       '09:00 pm',
        Lunes:      Platillos.Cena.LicuadoManzanaLeche,
        Martes:     Platillos.Cena.NopalesConPollo,
        Miercoles:  Platillos.Cena.EnsaladaQuesoPanela,
        Jueves:     Platillos.Cena.PapayaYQuesoCottage,
        Viernes:    Platillos.Cena.Quesadilla,
        Sabado:     Platillos.Cena.PechugaAsada,
        Domingo:    Platillos.Cena.BisteckDeRes,
    },
}

moment.locale('es');

function capitalizarPrimeraLetra(str) {
    return str.charAt(0).toUpperCase() + str.slice(1);
}

const removeAccents = (str) => {
    return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
}

$(function(){
    $('.collapsible').collapsible();

    var today = capitalizarPrimeraLetra( removeAccents( moment(new Date()).format('dddd') ) );
    $('.select-week-day').val(today);
    $('.list-daily-diet').children()[0].click();

    var hora = moment().format('HH');
    var minutos = moment().format('mm');
    var format12 = '';

    if( hora > 12 )
        format12 = 'pm';
    else
        format12 = 'am';

    console.log( today + ", "+ (hora-12) +":"+ minutos+" "+format12 );

    if( hora <= 8 && minutos <= 30  )
        $('.list-daily-diet').children()[0].click(); // desayuno
    else if( hora <= 10 && minutos <= 30 )
        $('.list-daily-diet').children()[1].click(); // almuerzo
    else if( hora >= 12 && hora <= 13 )
        $('.list-daily-diet').children()[2].click(); // colacion después del almuerzo
    else if( hora >= 15 && hora <= 16 )
        $('.list-daily-diet').children()[3].click(); // comida
    else if( hora >= 17 && hora <= 18 )
        $('.list-daily-diet').children()[4].click(); // colacion después de la comida
    else if( hora >= 19 && minutos >= 20 || hora <= 24 )
        $('.list-daily-diet').children()[5].click(); // cena

    UpdateDietPerDay(today);
    ShowDietPerDay(today);
});

function ShowDietPerDay(Dia){
    var collection_element_default =    "<ul class='collection with-header show-diet-per-day'>"+
                                            "<li class='collection-header'><h4>"+Dia+"</h4></li>";

    Desayuno  = DietWeek.Desayuno[""+Dia+""];
    Almuerzo  = DietWeek.Almuerzo[""+Dia+""];
    Colacion1 = DietWeek.ColacionPostAlmuerzo[""+Dia+""];
    Comida    = DietWeek.Comida[""+Dia+""];
    Colacion2 = DietWeek.ColacionPostComida[""+Dia+""];
    Cena      = DietWeek.Cena[""+Dia+""];

    console.log(Desayuno[0].Nombre);
    var ing1 = "", ing2 = "";
    Desayuno[0].Ingredientes.forEach(elements => { ing1  = ing1 + "<i> - "+elements+"<br></i>"; });
    Almuerzo[0].Ingredientes.forEach(elements => { ing2  = ing2 + "<i> - "+elements+"<br></i>"; });

    var collection_item = "<li class='collection-item'> <h5> Desayuno </h5> <strong>"+Desayuno[0].Nombre+":</strong> <br> "+ing1+"</li>";
    collection_item     = collection_item + "<li class='collection-item'> <h5> Almuerzo </h5> <strong>"+Almuerzo[0].Nombre+":</strong> <br> "+ing2+"</li>";

    var collection_element = "";
    var collection_element = collection_element_default + collection_item + "</ul>";
}

function UpdateDietPerDay(today){
    var NextDish;
    var Ingredients = "";
    var InnerText_TypeDish = "";

    NextDish = DietWeek.Desayuno[""+today+""];
    NextDish[0].Ingredientes.forEach(elements => { Ingredients  = Ingredients + "<li>"+elements+"</li>"; });
    InnerText_TypeDish = "</h4><strong>" + NextDish[0].Nombre + "</strong></h4> <br><br> Ingredientes: <br>" + Ingredients;
    $('.desayuno-body').html(InnerText_TypeDish);
    Ingredients = "";

    NextDish = DietWeek.Almuerzo[""+today+""];
    NextDish[0].Ingredientes.forEach(elements => { Ingredients  = Ingredients + "<li>"+elements+"</li>"; });
    InnerText_TypeDish = "</h4><strong>" + NextDish[0].Nombre + "</strong></h4> <br><br> Ingredientes: <br>" + Ingredients;
    $('.almuerzo-body').html(InnerText_TypeDish);
    Ingredients = "";

    NextDish = DietWeek.ColacionPostAlmuerzo[""+today+""];
    NextDish[0].Ingredientes.forEach(elements => { Ingredients  = Ingredients + "<li>"+elements+"</li>"; });
    InnerText_TypeDish = "</h4><strong>" + NextDish[0].Nombre + "</strong></h4> <br><br> Ingredientes: <br>" + Ingredients;
    $('.colacion1-body').html(InnerText_TypeDish);
    Ingredients = "";

    NextDish = DietWeek.Comida[""+today+""];
    NextDish[0].Ingredientes.forEach(elements => { Ingredients  = Ingredients + "<li>"+elements+"</li>"; });
    InnerText_TypeDish = "</h4><strong>" + NextDish[0].Nombre + "</strong></h4> <br><br> Ingredientes: <br>" + Ingredients;
    $('.comida-body').html(InnerText_TypeDish);
    Ingredients = "";

    NextDish = DietWeek.ColacionPostComida[""+today+""];
    NextDish[0].Ingredientes.forEach(elements => { Ingredients  = Ingredients + "<li>"+elements+"</li>"; });
    InnerText_TypeDish = "</h4><strong>" + NextDish[0].Nombre + "</strong></h4> <br><br> Ingredientes: <br>" + Ingredients;
    $('.colacion2-body').html(InnerText_TypeDish);
    Ingredients = "";

    NextDish = DietWeek.Cena[""+today+""];
    NextDish[0].Ingredientes.forEach(elements => { Ingredients  = Ingredients + "<li>"+elements+"</li>"; });
    InnerText_TypeDish = "</h4><strong>" + NextDish[0].Nombre + "</strong></h4> <br><br> Ingredientes: <br>" + Ingredients;
    $('.cena-body').html(InnerText_TypeDish);
    Ingredients = "";
    
}

$('.select-week-day').on('change', function(){
    var DayWeek = $(this).val();

    UpdateDietPerDay(DayWeek);
});

$('.collapsible').on('click', '.collapsible-header', function(){    
    $(this).parent().siblings().children().removeClass('collapsible-active');
    $(this).addClass('collapsible-active');
});

$('.list-daily-diet').on('click', '.dish-item', function(){
    $(this).siblings().removeClass('active');
    $(this).addClass('active');

    var DayWeek = $('select.select-week-day').val();
    var TypeDish = $(this).text().split(' ')[0];
    var TypeDishSelected;

    if( TypeDish == 'Colación' )
        TypeDishSelected = DietWeek["ColacionPostAlmuerzo"];
    else if( TypeDish == 'Merienda' )
        TypeDishSelected = DietWeek["ColacionPostComida"];
    else
        TypeDishSelected = DietWeek[""+TypeDish+""];

    var DayDishSelected = TypeDishSelected[""+DayWeek+""];

    var collection_element =    "<ul class='collection with-header show-diet-per-day'>"+
                                    "<li class='collection-header'><h4 class='center-align'>"+DayDishSelected[0].Nombre+"</h4> <br> <h5> Ingredientes: </h5> </li>";

    var ing1 = "";
    DayDishSelected[0].Ingredientes.forEach(elements => { ing1  = ing1 + "<li class='collection-item'>"+elements+"</li>"; });
    collection_element = collection_element + ing1 + '</ul>';

    $('.show-selection-diet').html(collection_element);
});


// Funcion para mostrar la dieta semanal completa
function ShowWeekDiet(){
    var elements = "";

    for( i in DietWeek ){

        var ingl = "", ingm = "", ingmi = "", ingj = "", ingv = "", ings = "", ingd = "";
        
        DietWeek[""+i+""].Lunes[0].Ingredientes.forEach(elements =>     { ingl  = ingl  + "<li>"+elements+"</li>"; });
        DietWeek[""+i+""].Martes[0].Ingredientes.forEach(elements =>    { ingm  = ingm  + "<li>"+elements+"</li>"; });
        DietWeek[""+i+""].Miercoles[0].Ingredientes.forEach(elements => { ingmi = ingmi + "<li>"+elements+"</li>"; });
        DietWeek[""+i+""].Jueves[0].Ingredientes.forEach(elements =>    { ingj  = ingj  + "<li>"+elements+"</li>"; });
        DietWeek[""+i+""].Viernes[0].Ingredientes.forEach(elements =>   { ingv  = ingv  + "<li>"+elements+"</li>"; });
        DietWeek[""+i+""].Sabado[0].Ingredientes.forEach(elements =>    { ings  = ings  + "<li>"+elements+"</li>"; });
        DietWeek[""+i+""].Domingo[0].Ingredientes.forEach(elements =>   { ingd  = ingd  + "<li>"+elements+"</li>"; });

        elements = elements + "<tr>" +
                                "<td>" + DietWeek[""+i+""].Hora   + "</td>"+
                                "<td> <strong>" + DietWeek[""+i+""].Lunes[0].Nombre     +"</strong><br><br> Ingredientes: "+ingl+" <br></td>"+
                                "<td> <strong>" + DietWeek[""+i+""].Martes[0].Nombre    +"</strong><br><br> Ingredientes: "+ingm+" <br></td>"+
                                "<td> <strong>" + DietWeek[""+i+""].Miercoles[0].Nombre +"</strong><br><br> Ingredientes: "+ingm+" <br></td>"+
                                "<td> <strong>" + DietWeek[""+i+""].Jueves[0].Nombre    +"</strong><br><br> Ingredientes: "+ingm+" <br></td>"+
                                "<td> <strong>" + DietWeek[""+i+""].Viernes[0].Nombre   +"</strong><br><br> Ingredientes: "+ingm+" <br></td>"+
                                "<td> <strong>" + DietWeek[""+i+""].Sabado[0].Nombre    +"</strong><br><br> Ingredientes: "+ingm+" <br></td>"+
                                "<td> <strong>" + DietWeek[""+i+""].Domingo[0].Nombre   +"</strong><br><br> Ingredientes: "+ingm+" <br></td>"+
                            +"</tr>"; 
    }
    $('.show_diet').html(elements);
}


